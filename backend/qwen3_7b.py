import requests
import json

def generate_with_qwen(prompt: str, model: str = "llama3:8b") -> str:
    """
    Generate text using local LLM via Ollama.
    
    Args:
        prompt: The prompt to send to the model
        model: The model name (default: llama3:8b)
    
    Returns:
        Generated text response
    """
    url = "http://localhost:11434/api/generate"
    data = {
        "model": model,
        "prompt": prompt,
        "stream": False,  # Set to True if you want streaming responses
        "num_ctx": 8192,  # Reduced from 200k to prevent stalling on local hardware
        "num_predict": 2500,  # ~2000-2500 tokens needed for 30-50 sentences
        "temperature": 0.7  # Balanced creativity for financial writing
    }
    
    try:
        # Increased timeout to 300 seconds for longer generations and model loading
        response = requests.post(url, json=data, timeout=300)
        response.raise_for_status()
        
        result = response.json()
        return result.get('response', '')
        
    except requests.exceptions.ConnectionError:
        print("Error: Could not connect to Ollama. Make sure it's running on localhost:11434")
        print("Run 'ollama serve' to start the server")
        return None
    except Exception as e:
        print(f"Error: {e}")
        return None

def test_qwen():
    """Test the Qwen model with a sample prompt."""
    test_prompt = """Summarize the following text in 25 sentences: 
    Skip to content Burford Capital Logo Dark About What we do Introduction to legal finance Insights, news & events Contact us Investor relations  Americas Insights, news & events Insights & research Settle smarter: How data and valuation reframe high stakes disputes November 18, 2025 James MacKinnon Summary Burford’s James MacKinnon and Solomonic’s Edward Bird explore how data-driven valuation and analysis can help clients and counsel navigate the psychology of settlement and make smarter, more informed litigation decisions. We instinctively understand that human emotions influence decision-making and can lead to suboptimal outcomes. Paradoxically, in the high stakes arena of modern litigation, rational decision-making can give way to human psychology, incomplete data and internal politics, especially when disputes stretch into the hundreds of millions or billions and the decision to settle or press on might determine the fate of businesses and reputations alike. This scenario and how data driven analysis and valuation modelling can transform settlement strategy in the most complex disputes were central themes of Settle Smarter, a joint webinar hosted by Edward Bird of Solomonic and James MacKinnon of Burford Capital. The panel featured experts Alexander Oddy (Herbert Smith Freehills Kramer), Fiona Huntriss (Pallas Partners) and Dr. Henry Stott (Dectech). Data is changing how decision-makers view disputes Solomonic, a litigation analytics platform, provides insights that help lawyers and clients make informed decisions with a unique view of trends and patterns in case behavior. The platform aggregates historic litigation outcomes to indicate case trajectories, settlement probabilities and likely durations. This allows practitioners to compare their case against similar disputes and provides a data-driven baseline for assessment and strategy. According to Solomonic’s data, larger disputes not only take far longer—up to four times as long to reach judgment for a claim for more than a billion-pounds compared to smaller claims—but they also appear harder to win. Indeed, Solomonic’s data shows a steep decline in success rates as claim value rises (see Figure 2). Figures 1 and 2: Time and outcome impact of dispute However, Dr. Henry Stott noted that the raw data hides an important truth. The relationship between claim value and outcome is confounded. Solomonic’s forecasting calculator leverages its proprietary litigation dataset with statistical modelling to predict case outcomes and settlement probabilities at different stages of a dispute. “Once you model the data statistically,” he explained, “the actual chance of winning a given case type is fairly constant. What changes is that more big cases go to trial, and more of them are weak cases.” In other words, it’s not that higher value cases are inherently harder—it’s that they’re harder to settle, as defendants become increasingly risk-seeking when the stakes rise. Referencing Prospect Theory by Daniel Kahneman and Amos Tversky, Stott added: “People are risk-seeking over losses. As the numbers go up, defendants are more likely to gamble on trial rather than settle,” even when rational analysis suggests settlement is optimal. Fiona Huntriss, Partner at Pallas Partners explained that data can be a powerful equalizer in the decision-making process, but the data needs to be interpreted thoughtfully. Huntriss observed that data gives clients and lawyers a shared reference point, to help navigate different perceptions around the likely value and outcome of a case. From emotion to economics: Burford’s approach to valuing disputes The discussion highlighted the importance of bringing objectivity to the settlement process, allowing clients and lawyers to balance competing interests and stakeholders when developing settlement strategy. Burford has helped clients navigate high-stakes settlement discussions by providing an objective valuation of their claims at any stage of the dispute process, using industry-accepted, risk-adjusted methodologies. This approach helps clients to develop appropriate strategies for setting or responding to settlement offers based on an impartial assessment of the key risk factors affecting their claim e.g. risk of loss, appellate risk and enforcement risk. By adopting a risk-adjusted approach to valuing a dispute, clients can determine the net present value of their claim and use that to inform the monetary aspect of settlement strategy. If the client secures an agreement for an amount above a valuation amount, that outcome represents an objective success when measured against the risks they would face if negotiations were to fail and the dispute were to proceed. How does claim valuation methodology work? First, the client and their lawyer must determine the weighted average damages outcome for the claim. This is assessed by breaking down the heads of claim and/or damages components and ascribing a percentage likelihood to each possible damages outcome based on its merits. The percentages for each damages outcome, including a zero damages outcome, must total 100%. The weighted average damages outcome is calculated by multiplying each damages outcome by its percentage, and then adding the outputs together. Next, the weighted average damages outcome is discounted by the relevant risk factors identified for the dispute. A simple set of risk factors may be the overall merits assessment of the case, the likelihood of a first instance judgment being overturned on appeal and the difficulty of enforcing a claim given the respondent’s creditworthiness. It’s also important to factor in the cost of capital, taking into account the estimated duration of the dispute, and in cost-shifting jurisdictions, the potential liability for the respondent’s costs if the client loses. Ultimately, the specific risk factors used by the client and lawyer are subjective and depend on the facts of the dispute. Case study: Valuing a $500 million litigation Client X has brought an English litigation claim with a maximum value of $500 million, spread across four heads of claim but subject to a $25 million limitation of liability. To assess potential outcomes, lawyers and experts model the probability of each head of claim being awarded by the court, ensuring that the cumulative probabilities add up to 100%. The resulting probability distribution allows Burford to calculate a weighted average damages outcome by multiplying each potential damages outcome by its probability and summing the results (Figure 3). Figure 3: Modelling weighted average damages outcome Further analysis (Figure 4) reveals how a series of risk factors could reduce the weighted average damages outcome to a present-day valuation. In this case, cumulative risks—including a 35% chance of loss at trial, appellate risk and enforcement risk—are applied alongside a 10% cost of capital discount and an estimated $10 million in legal fees and expenses. Starting from a $258 million weighted average damages outcome, these adjustments result in a present value of $75.9 million. Accordingly, Client X would achieve a successful result for its $500 million claim if it were able to settle at $75 million or higher at the very beginning of the dispute. Figure 4: Modelling risk adjusted present value For clients, this can be a clarifying process as to the true value of their claim. A client may optimistically consider that it has a good overall claim for $500 million, but after applying a series of adjustments based on the risks the clients faces, including losing the claim, the reality is that the present value of the claim may be closer to $75 million, and settling at or above that amount represents an objective success at that stage in time. That’s often a hard message for boards to hear. It is important to note that valuations are not static–-risk factors and their probabilities can change as a case develops. For example, new evidence may be disclosed which improves the merits assessment, or a case could be bifurcated and a successful decision on liability may be handed down. These developments may work to increase the value of the claim as the dispute progresses, and in turn affect the current approach to settlement strategy. Alexander Oddy’s Decision Analysis Unit at Herbert Smith Freehills Kramer applies similar quantitative methods to help clients navigate settlement discussions. In the webcast, he explained that the key is not to follow the numbers blindly, but instead use empirical analysis to support rational decision-making. Decision analysis tools are as much about communication as computation. They help translate complex legal advice into the language of business—risk, distribution of outcomes, expected value. In high-stakes disputes, that translation is essential for aligning C-suite and legal teams around a common understanding of acceptable outcomes. AI and the future of litigation modelling Even without AI, Burford’s internal investment model already maps relationships among factors such as profitability, duration, settlement value and risk of loss—providing clients with data-driven insights to inform litigation decisions. Integrating AI into these models can enhance both speed and accuracy, enabling faster analysis of vast datasets and more refined predictions. The quality of AI outputs depends on the quality of input data, and with limited public data on commercial disputes, effective AI modelling still relies heavily on expert analysis and proprietary information. Burford’s modelling draws upon its unique data set of commercial disputes outcomes, including settlement outcomes, across its more than 15 years of funding and analysis. A smarter settlement culture What emerged from Settle Smarter was the need for a change in mindset more than a technological revolution. To that end, the integration of data analytics, behavioral science and valuation methodology is helping reshape how clients, counsel and legal finance providers define success in litigation. Edward Bird is CEO of Solomonic and leads the business, with a keen focus on client engagement and product development and is committed to bringing data to every litigation decision. James MacKinnon is a Director with responsibility for assessing and underwriting legal risk as part of Burford’s EMEA investment team. Our author London James MacKinnon Director View bio The latest from Burford Read all Blog Notices in Saudi construction disputes: How the Civil Code is shaping risk allocation Joe Durkin Blog Christopher Bogart contributes chapter on generative AI and arbitration finance to ICCA Congress Book Christopher Bogart Blog 5 minutes with... Teresa Gutiérrez Chacón Teresa Gutiérrez Chacón Get in touch We welcome inquiries about Burford financing and other ways Burford can help clients and law firms. Please click the button below to complete a contact form or email us directly. Contact Us Burford Capital Logo Light About Our team Careers Contact us What we do For businesses For law firms Disputes we finance Where we are Case studies Learn more Introduction to legal finance The Burford Quarterly Events & webcasts Research & insights News & press releases X LinkedIn Instagram This material has been prepared by Burford Capital Limited (together with its subsidiaries, “Burford Capital”) solely for informational purposes, is not intended to be relied upon as a forecast, research or investment advice and is not a recommendation, offer or solicitation to subscribe for, buy or sell any securities, products or services or to adopt any investment strategy. The opinions expressed in this material are as of the date of this material and are subject to change at any time without notice, and Burford Capital does not have any responsibility to update this material to account for such changes. Unless otherwise specified, information contained in this material is sourced from and reflects the views and opinions of Burford Capital. Certain information contained in this material has been obtained from sources other than Burford Capital. While such information is believed to be reliable for purposes used in this material, no representation or warranty, either express or implied, is made as to fairness, accuracy, reasonableness or completeness thereof, and Burford Capital does not take any responsibility for such information. Certain information contained in this material discusses general market activity, industry or sector trends or other broad-based economic, market or political conditions and should not be construed as research or investment advice. There can be no assurances that any of the trends described in this material will continue or will not reverse. Past events and trends do not imply, predict or guarantee, and are not necessarily indicative of, future events or results. The information contained in this material is not intended to provide, and should not be relied upon for, accounting, legal or tax advice or investment recommendations. Reliance upon information in this material is at the sole discretion of the reader. This material may contain “forward-looking statements”. Although Burford Capital believes that the assumptions, expectations, projections, intentions and beliefs about future results and events reflected in forward-looking statements have a reasonable basis and are expressed in good faith, forward-looking statements involve known and unknown risks, uncertainties and other factors, which could cause Burford Capital’s actual results and events to differ materially from (and be more negative than) future results and events expressed, targeted, projected or implied by these forward-looking statements. The forward-looking statements speak only as of the date of this material and, except as required by applicable law, Burford Capital undertakes no obligation to update or revise any forward-looking statements, whether as a result of new information, future events or otherwise. © Burford Capital LLC 2025 Terms and conditions Privacy Policy (US) Privacy Policy (UK & EU) Privacy notice for California consumers Modern slavery act This website uses cookies to ensure proper site functionality, personalize content, and analyze traffic. We only use strictly necessary cookies by default. Other cookies will be used only if you give us your consent. Accept All Cookies (strictly necessary cookies, performance cookies, analytics cookies, marketing cookies) Reject All Cookies (except strictly necessary cookies)
"""
    
    print("Testing Qwen model...")
    print(f"Prompt: {test_prompt}\n")
    
    response = generate_with_qwen(test_prompt)
    
    if response:
        print(f"Response: {response}")
    else:
        print("Failed to get response from Qwen model")

if __name__ == "__main__":
    test_qwen()
